<html>
    <head>
<!-- Firebase App is always required and must be first -->
<script src="https://www.gstatic.com/firebasejs/3.3.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.3.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.3.0/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.3.0/firebase.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
        <script src="https://www.gstatic.com/firebasejs/3.3.0/firebase.js"></script>
        <script>
            // Initialize Firebase
            var config = {
              apiKey: "AIzaSyBP1qnryWrAFRI13KVUpU1UMaUNMhXNSsk",
              authDomain: "spaceapp-87f95.firebaseapp.com",
              databaseURL: "https://spaceapp-87f95.firebaseio.com",
              projectId: "spaceapp-87f95",
              storageBucket: "spaceapp-87f95.appspot.com",
              messagingSenderId: "408021766763"
            };
            firebase.initializeApp(config);
          </script>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">
    </head>
    <body>
        <h1 class="page-header text-center">Sign in&nbsp;</h1>
        <div class="text-center">
                   <label>Email</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                   <input type="text" id="email">
                   <br>
                   <label>Password</label>&nbsp;&nbsp;
                   <input type="password" id="pass">
                   <br>
                   <br>&nbsp;&nbsp;&nbsp;&nbsp;
                   <br>
                   <label>
                     name
                   </label>
                   <br>
                   <input type="text" id="name"></input>
                   <br>
                   <button class="btn" id="signIn" onclick="signIn()">Sign in</button>
                    <br>


                    <label>Email</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <input type="text" id="emailUp">
                    <br>
                    <label>Password</label>&nbsp;&nbsp;
                    <input type="password" id="passUp">
                    <br>
                    <br>&nbsp;&nbsp;&nbsp;&nbsp;
                    <button class="btn" id="signIn" onclick="signUp()">Sign up</button>

                   <div id="n"></div>
                   <div id="result" style="color:red"></div>

                   <img id="apod_img_id" width="250px"/>
                  <!-- <button class="btn" id="signIn" onclick="add()">Sign in</button> -->
                   
                   <script src="assets/js/jquery.min.js"></script>
                   <script src="bootstrap/js/bootstrap.min.js"></script>
                   <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
                   <script src="assets/js/ie10-viewport-bug-workaround.js"></script>
                           <script>
                            var launch = [];
                var dynamicUrl = 'https://launchlibrary.net/1.4/launch?startdate=2017-10-19&limit=100';
                $.getJSON(dynamicUrl, function(data) {
                  console.log("This is an example of a dynamic JSON file being served by a web server.")
                  console.log(data);
                  launch = data;
                  console.log(data.launches[0].id);
                });
                
                       
               function signIn(){
  
               var email = $('#email').val();
               var password = $('#pass').val();
               var name = $('#name').val();
               firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
                         // Handle Errors here.
                         var errorCode = error.code;
                         var errorMessage = error.message;
                         console.log('signIn error', error);
               alert("Email or Password is not correct");
               });
               firebase.auth().onAuthStateChanged(function(user) {
             if (user) {
               // User is signed in.
              //  window.location.href = 'welcom.html';
              // var messageListRef = database.ref('Users/'+ '1');
              //     // var newMessageRef = messageListRef.; // push for id
              //     messageListRef.set({
              //         name:name
              //     });
             } else {
               // No user is signed in.
             }
               });
               var myUserId = firebase.auth().currentUser.uid;
               var topUserPostsRef = firebase.database().ref('Users/' + myUserId)
                  // var newMessageRef = messageListRef.; // push for id
                  topUserPostsRef.set({
                      name:name
                  });

               }

               function add(){
                 var database = firebase.database();
                var name = document.getElementById('name').value;
                writeUserData(name);

              function writeUserData(name) {
                  var messageListRef = database.ref('Users/');
                  var newMessageRef = messageListRef.push(); // push for id
                  newMessageRef.set({
                      name:name
                  });
                  }
               }

               function signUp(){

              var email = $('#emailUp').val();
               var password = $('#passUp').val();
                firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {
                  // Handle Errors here.
                  var errorCode = error.code;
                  var errorMessage = error.message;
                  // ...
                });
               }

              //  function read(){
                // var starCountRef = firebase.database().ref('Users/');
                // starCountRef.on('value', function(snapshot) {
                //   updateStarCount(postElement, snapshot.val());
                // });

                var starCountRef = firebase.database().ref('Users/');
                starCountRef.on("value", function(snapshot) {
                $("#n").html("");
                snapshot.forEach(function(data) {
                    var cel1 = data.val().name;
                    // var tr = "<tr><td>"+cel1+"</td><td>"+cel2+"</td><td>"+cel3+"</td><td>"+cel4+"</td><td>"+cel5+"</td><td>"+cel6+"</td><td>"+cel7+"</td><td>"+cel8+"</td><td>"+cel9+"</td><td>"+cel10+"</td><td>"+cel11+"</td></tr>";
                    $("#n").append(cel1);
                });
                });
              //  }

               function signOut(){
                firebase.auth().signOut().then(function() {
                  // Sign-out successful.
                }).catch(function(error) {
                  // An error happened.
                });
               }
               </script>
    </body>
</html>